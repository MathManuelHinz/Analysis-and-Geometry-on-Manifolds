\chapter{Vector fields}
\beginlecture{15}{29.11.2024}

\section{Basics}

Let \(M\) be a smooth manifold. Recall  that we have 
\[\pi: TM \to M\]
where \(TM=\coprod_{p\in M} T_p M\). A typical point in \(TM\) is \((p,\underbrace{v}_{\in T_pM})\) and 
\[\pi((p,v))=p.\]

\begin{definition*}
    A (smooth) \dhighlight{vector field} \(X\) on \(M\) is a 
    section of \(\pi:\TM\to M\). In other words 
    \begin{enumerate}
        \item \(X:M\to TM\) smooth map 
        \item \(\pi\circ X=\text{id}\)
    \end{enumerate} 
    We let \(\mathcal{X}(M)\) be the set of vector fields on \(M\).
\end{definition*}

\dhighlight{Concretely:} To every point \(p\in M\), we associate a vector \[X(p)=X_\in T_pM.\]
Visually
\begin{figure}[H]\label{fig:7.01}
    \centering
    \includegraphics[width=.7\textwidth]{sketch_7_01.png}
    \caption{Sketch 7.01}
\end{figure}

Another picture:

\begin{figure}[H]\label{fig:7.02}
    \centering
    \includegraphics[width=.7\textwidth]{sketch_7_02.png}
    \caption{Sketch 7.02}
\end{figure}

\begin{lemma}\label{lem:7.1}
    \begin{enumerate} Let \(M\) be a smooth manifold.
        \item[(a)] \(\mathcal{X}(M)\) is a \(\R\) vector space 
        \item[(b)] \(\mathcal{X}(M)\) is a module over the ring \(C^{\infty}(M)\) of smooth functions on \(M\):\marginnote{\(fX(p)=\underbrace{f(p)}_{\in\R}\underbrace{X(p)}_{\in T_pM}\)}
        \[(f,X)\mapsto fX\] 
    \end{enumerate}
\end{lemma}

\begin{proof}
    Exercise.
\end{proof}

\begin{remark}\marginnote{We are not gonna study those, but it is useful to know they exist}
    In this class, we only consider smooth vector fields. If you drop the smoothness condition on the map \(X:M\to TM\),
    you get a \dhighlight{rough vector field}. 
\end{remark}

\begin{example}
    Recall that \(T_p\R^n\equiv \R^n\), hence \(T\R^n\equiv \R^n\times \R^n\).
    A vector field \(X\in\mathcal{X}(\R^n)\) is just a map  
    \begin{center}
        \begin{tikzcd}
            X:\R^n \arrow[r] & R^n\times \R^n\\
            p \arrow[r] & (p,v(p))
        \end{tikzcd}
    \end{center}
    Equivalently \(X\) is a map \(\R^n\to\R^n\), since the first coordinate is just fixed to be the 
    identity. This agrees with the notion from Analysis 2. \marginnote{A map \(\R^n\ni p\mapsto (X^1(p),\dots,X^n(p))\)}
\end{example}

\begin{remark}
    \(T_p\R^n\) has a canonical basis \(\{(\partial_{x_1})_p,\dots,(\partial_{x_n})_p\}\). This identifies 
    \((\partial_{x_i})_p\equiv (0,\dots,0,\overbrace{1}^{i\text{th component}},0\dots,0)\). We can equivalently 
    write a vector field on \(\R^n\) as \[p\mapsto (X^1(p),\dots,X^n(p))\]
    or 
    \[p\mapsto X^1(p)(\partial_{x_1})_p+\dots+X^1(p)(\partial_{x_n})_p.\]
\end{remark}

\dhighlight{Notation:} We write \(\partial_{x_i}\in\mathcal{X}(\R^n)\) for the vector field 
\[p \mapsto (\partial_{x_i})_p\in T_p\R^m\equiv (0,\dots,0,\overbrace{1}^{i\text{th component}},0\dots,0)\]
In the literature another common notation for the same thing is \(\frac{\partial}{\partial x_i}\).

\begin{example}[Vector field on \(S^3\)]
    Let \(M=\{(x_0,\dots,x_3)\mid \sum x_i^2=1\}\subset\R^{1+3}\). Let \(X=x_0\partial_{x_1}-x_1\partial_{x_0}+x_2\partial_{x_3}-x_3\partial_{x_2}\in \mathcal{X}(\R^{1+3}).\)
    Observe that \(X\perp S^3 \iff \underbrace{X\cdot v}_{X_v\cdot v} = 0, v\in S^3.\) Hence \(X \in \mathcal{X}(S^3)\).
    \begin{center}
        \begin{tikzcd}
            \arrow[d] TS^3 \arrow[r,hook] & \arrow[d,"\pi",swap] T\R^{1+3}\\
            \arrow[u,dotted,bend left,"X\restrict{S^3}"]S^3 \arrow[r,hook] & \R^{1+3}\arrow[u,bend right]
        \end{tikzcd}
    \end{center}
    where the map \(X\restrict{S^3}\) is implied by composition.
\end{example}

\begin{example}
    For any \(M\) smooth, the map \(p\mapsto 0\in T_pM\) is a vector field called the \dhighlight{zero section}.\marginnote{This is the only canonical vector field. ``There is no 1''}
\end{example}

Let \(F:M \to N\) be a smooth map. Let \(X\in\mathcal{X}(M),Y\in \mathcal{X}(N)\).

\begin{definition*}
    We say that \(X,Y\) are \(\dhighlight{\(F\)-related}\) if the following diagram commutes 
    \begin{center}
        \begin{tikzcd}
            \arrow[d]TM \arrow[r,"dF"]& TN\arrow[d] \\
            \arrow[u,bend left,"X"]M \arrow[r,"F"] & N \arrow[u,bend right,swap,"Y"]
        \end{tikzcd}
    \end{center} 
\end{definition*}

\dhighlight{Be warned!} Given \(F:M\to N, X\in\mathcal{X}(M)\), there need not exist a \(Y\in \mathcal{X}(N)\) s.t. 
\(X,Y\) are \(F\)-related. Vector fields do not push forward.\marginnote{They push back!}
\begin{figure}[H]\label{fig:7.04}
    \centering
    \includegraphics[width=.7\textwidth]{sketch_7_04.png}
    \caption{Sketch 7.04}
\end{figure}

\begin{definition*}
    Let \(F:M\to N\) be a diffeomorphism. Let \(X\in\mathcal{X}(M)\), we define 
    the \dhighlight{pushforward} of \(X\) \(F_\star X\in \mathcal{X}(N)\)
    by \[(F_\star X)_p=dF_{F^{-1}(p)}(X_{F^{-1}(p)}),\]
    i.e.:
    \begin{center}
        \begin{tikzcd}
            \arrow[d]TM \arrow[r,"dF"]& TN\arrow[d] \\
            \arrow[u,bend left,"X"]M  &\arrow[l,"F^{-1}"] N \arrow[u,,swap,bend right,dotted,"F_\star X"]
        \end{tikzcd}
    \end{center}
\end{definition*}

\begin{lemma}\label{7.2}
    Given \(F:M\to N\), \(G:N\to P\) diffeomorphisms, 
    \begin{enumerate}
        \item[(i)] \((G\circ F)_\star=G_\star\circ F_\star: \mathcal{X}(M)\to \mathcal{X}(P)\)
        \item[(ii)] if \(F=\text{id},M=N\), then \(F_\star=\text{id}:\mathcal{X}(M)\to \mathcal{X}(M)\)  
    \end{enumerate}
\end{lemma}

\begin{proof}
    Exercise.
\end{proof}

\section{Vector fields as derivations}

Recall: a tangent vector \(V\in T_pM\), \(p\in M\) can be viewed as a 
\dhighlight{derivation at \(p\)}, i.e. \[V:C^\infty(M)\to\R,V(fg)=f(p)V(g)+V(f)g(p).\]

\dhighlight{Notation:} Let \(X\in\mathcal{X}(M)\). Given a smooth function on \(f\in C^\infty(M)\), we 
let \(Xf\) be the map \(M\ni p\mapsto X_p f\in \R\).

\begin{lemma}\label{lem:7.3}
    \begin{enumerate}
        \item[(i)] If \(X\in \mathcal{X}(M)\), i.e. \(X\) is a smooth vector field, then \(Xf\) is a smooth function 
        \item[(ii)] Suppose that \(X:M\to TM\) is an \dhighlight{arbitrary} section (this is also known as a rough vector field). If 
                    \(Xf\) is smooth for all \(f\in C^\infty(M)\), then \(X\) is a \dhighlight{smooth} vector field.  
    \end{enumerate}
\end{lemma}

\begin{proof}
    Sheet 09. Hint: Test against coordinate functions. \marginnote{Check in \(\R^n\)}
\end{proof}

\begin{definition*}
    An \(\R\) linear map \(X:C^\infty(M)\to C^\infty(M)\) is called a \dhighlight{derivation} if, for all \(f,g\in C^\infty(M)\): 
    \[X(fg)=f\cdot Xg+Xf\cdot g\]\marginnote{The \(\cdot\) are multiplications of functions}
\end{definition*}

\begin{lemma}\label{lem:7.4}
    \begin{enumerate}
        \item If \(X\in \cX(M)\), then the map \[C^\infty(M)\ni f\mapsto Xf\in C^\infty(M)\]
              is a derivation.
        \item every derivation is of this form.
    \end{enumerate}
\end{lemma}

Upshot of the lemma: \[\cX(M)\equiv \{\text{derivations } C^\infty(M)\to C^\infty(M)\}\]
just as we identified before 
\[T_pM\equiv \{\text{derivations at } p\}.\]

\begin{proof}\marginnote{All of this follows basically by applying point wise definitions}
    (1) By definition, \(\forall p\in M\), we have 
    \begin{align*}
        X(fg)(p)=X_p(fg)&=f(p)X_pg+X_pf g(p)\\
        &= f(p)Xg(p) + Xf(p)g(p).
    \end{align*}
    Suppose that \(\nu:C^\infty\to C^\infty\) is a derivation. Define a (possibly discontinuous) 
    vector field \(X\) by setting
    \[X_pf=\underbrace{\nu f}_{\in C^\infty(M)}(p).\]
    By lemma \ref{lem:7.3} (ii) \(X\) is smooth, because \(\nu f\in C^\infty\).
\end{proof}

\begin{definition*}
    Let \(X,Y\in \mathcal{X}(M)\). We let \([X,Y]\in \cX(M)\) defined by the rule 
    \begin{equation}\label{eq:def_lie-bracket}
        C^\infty(M)\ni f\mapsto XYf-YXf \in C^\infty(M).
    \end{equation}
    We call \([X,Y]\) the \dhighlight{Lie bracket} of \(X,Y\).
\end{definition*}

\begin{lemma}\label{lem:7.5}
    Equation \ref{eq:def_lie-bracket} defines a derivation, hence \([X,Y]\)
    is a smooth vector field (by Lemma \ref{lem:7.4}). 
\end{lemma}

\begin{proof}
    For \(f,g\in C^\infty(M)\):
    \begin{align*}
        [X,Y](f,g)&=XY(fg)-YX(fg) \\
        &=X[f\cdot Yg+ Yf \cdot g]- Y [f\cdot Xg + Xf\cdot g]\\
        &=Xf\cdot Yg+f\cdot XYg+ XY f\cdot g + Xf\cdot Xg\\
        & -Yf\cdot X g- f\cdot YXg-YXf \cdot g- Xf\cdot Yg\\
        &= f(XY-YX)(g)-g(XY-YX)f \\
        &= f[X,Y]g+g[X,Y]f\qedhere 
    \end{align*}
\end{proof}

\begin{remark}[Properties of Lie bracket]
    The Lie bracket \([\cdot,\cdot]:\cX(M)\times \cX(M)\to \cX(M)\) satisfies:
    \begin{enumerate}
        \item[(i)] bilinearity: \begin{align*}
            [aX+bY,Z] &= a[X,Z]+b(Y,Z)\\
            [X,aY+bZ]&=  a[X,Y]+b(X,Z)
        \end{align*} 
        \item[(ii)] anti-symmetry \[[X,Y]=-[Y,X]\]
        \item[(iii)] Jacobi identity: \[[X,[Y,Z]]+[Y,[Z,X]]+[Z,[X,Y]]\] 
    \end{enumerate}
    Thus \((\cX(M),[\cdot,\cdot])\) is a Lie algebra (an \(\infty\)-dimensional one).
\end{remark}

\dhighlight{Warning:}

\[C^\infty(M)\ni f\mapsto XY f\in C^\infty(M)\] 
does not define a vector field in general!
\markeol{15}

\beginlecture{16}{03.12.2024}

\begin{lemma}[Naturality of Lie brackets]\label{lem:7.6}
    Given \(F:M\to N\) smooth, \(X_1,X_2\in\cX(M),Y_1,Y_2\in\cX(N)\). Assume 
    \((X_i,Y_i)\) are \(F\) related for \(i=1,2\). Then \([X_1,X_2],[Y_1,Y_2]\) are 
    \(F\)-related.
\end{lemma}

\begin{proof}
     For \(f\in C^\infty(N)\)
    \begin{align*}
        X_1X_2(f\circ F) &= X_1((Y_1f)\circ F)=(Y_1Y_2f)\circ F
    \end{align*}
    SImilarly swapping the order of \(X_1,X_2\). Hence 
    \begin{align*}
        [X_1,X_2](f\circ F)&=(X_1X_2-X_2X_1)(f\circ F)\\
        &=(Y_1Y_2-Y_2Y_1)(f)\circ F\\
        &=[Y_1,Y_2](f)\circ F\qedhere
    \end{align*}
\end{proof}

\section{Coordinate vector fields}

Let \(M\) be a smooth manifold. Let \((U,\varphi)\) be a smooth chart. 

Recall that we abuse notation by writing \(x_i\equiv x_i\circ \varphi\), where \(\underbrace{x_i}_{x^i}(x)=x_i=\pi_i(x)\).\marginnote{w.r.t the chart}
\begin{figure}[H]\label{fig:7.05}
    \centering
    \includegraphics[width=.7\textwidth]{sketch_7_05.png}
    \caption{Sketch 7.05}
\end{figure}

If \(p\in U\), we also have been writing \((\partial_{x_i})_p=d\varphi_{\varphi(p)}^{-1}((\partial_{x_i})_{\varphi(p)})\).
\marginnote{Section of the tangent bundle, a vector field \dots}

\begin{lemma}\label{lem:7.7}
    The map \(U\ni p\mapsto (\partial_{x_i})_p\in T_p M\) is a smooth vector field on \(U\), i.e. an element 
    of \(\cX(U)\).
\end{lemma}

\begin{proof}
    
    Recall from \href{lec15}{last week}  
    \marginnote{We often ommit the identity, i.e. the first \(n\) entries of the following} 
    \(M=\R^n\)m then the map \[(x_1,\dots,x_n)\mapsto (x_1,\dots,x_n,0,\dots,0,1,0\dots,0)\]
    Then by section 7.1 % TODO 
    ,we have this is true, when \(M\) is an open subset of \(\R^n\).

    In general, \(d\varphi_{\varphi(p)}^{-1}((\partial_{x_i})_{\varphi(p)})=(\varphi)^{-1}_\star \partial_{x_i}\), where the pushfoward is 
    \[\varphi_\star^{-1}:\cX(\varphi(u))\to\cX(U).\]
    The lemma follows from the fact the fact that pushforwards of diffeomorphism send smooth vector fields to 
    smooth vector fields.
\end{proof}
\marginnote{It is important to understand the difference between vector fields and tangent vectors, like the difference between functions and elements of the target of those functions}
\dhighlight{Notation:} The vector field \(U\ni p\mapsto (\partial_{x_i})_p\) shall be denoted by \(\partial_{x_i}\).
Other sources / authors write \(\frac{\partial}{\partial x_i}\).

\begin{definition*}
    Let \(M\) be smooth of dimension \(m\).
    \begin{enumerate}
        \item[(i)] Given a point \(p\in M\), an m-tuple of vector fields \((X^1,\dots,X^m)\in \cX(M)^m\) is called a \dhighlight{local frame at \(p\)}, if \((X_p^1,\dots,X_p^m)\in T_p M^m\)
        \item[(ii)] We say that \((X^1,\dots,X^m)\in \cX(M)^m\) is a \dhighlight{global frame} if \((X_p^1,\dots,X_p^m)\) spans \(T_pM\) for all \(p\in M\). 
    \end{enumerate}
\end{definition*}

\begin{remark}
    We take \(X^i\in \cX(M)\) and not \(\cX(U)\) for local frames, since (similar to functions), we can always extend them!
\end{remark}

\begin{lemma}\label{lem:7.8}\marginnote{This uses the fact that being full rank is an open condition}
    If \((X^1,\dots,X^m)\) is a local frame at \(p\in M\), then there exists \(p\in U\subset M\) s.t. 
    \((X^1\restrict{U},\dots,X^m\restrict{U})\in \cX(U)^m\) is a global frame on \(U\).
\end{lemma}
\begin{proof}
    Exercise using lemma \ref{lem:4.1}.
\end{proof}

\dhighlight{Key example:} If \((U,\varphi)\) is a chart on \(M\), then \((\partial_{x_1},\dots,\partial_{x_m})\in \cX(M)^m\) form 
a global frame on \(U\).

\begin{remark}[Warning]
    It is not the case that all frames are of this form, i.e. there exists frames \((X^1\dots,X^m)\in \cX(M)^m\) local frames at some 
    \(p\in M\), such that \((X^1\restrict{U},\dots,X^m\restrict{U})\) is not a coordinate vector field for any chart \((V,\psi),V\subset U\).
    E.g. \([\partial_{x_i},\partial_{x_j}]\equiv 0.\)\marginnote{It turns our the condition \([\partial_{x_i},\partial_{x_j}]\equiv 0\) is necessary and sufficient}

\end{remark}

\section{Integral curves}

Let \(\gamma:(a,b)\to M\) be a smooth map (a curve). We write 
\(\dot{\gamma}(t)=d\gamma_t(\partial_t)\in T_{\gamma(t)}M\)
\begin{center}
    \begin{tikzcd}
        \arrow[d]T\R \arrow[r,"d\gamma"]& TM\arrow[d]\\
        \arrow[u,bend left,"\partial_t"]\R \arrow[ur,dotted,"\dot{\gamma}(t)"]\arrow[r,"\gamma"] &M
    \end{tikzcd}
\end{center}

In coordinates, \(gamma(t)=(\gamma^1(t),\dots,\gamma^n(t))\in \R^n\implies \dot{\gamma}(t)=(\dot{\gamma}^1(t),\dots,\dot{\gamma}^n(t))=\gamma^1(t)\partial_{x_1}+\dots+\gamma^n(t)\partial_{x_n}\),
where \(\dot{\gamma}^i(t)=\frac{d}{dt}\gamma^i(t)\).

\begin{definition*}
    Let \(M\) be a manifold and let \(V\in \cX(M)\). An \dhighlight{integral courve} for \(V\) is a curve 
    \(\gamma:(a,b)\to M\) such that 
    \[\dot{\gamma}(t)=V_{\gamma(t)}.\]   
    We typically assume \(0\in (a,b)\), we say that the \dhighlight{starting point} \(\gamma\), is the point \(\gamma(0)\in M\).
\end{definition*}

\begin{example}
    \(M=\R^2,V=\partial_x=(1,0)\).
    \begin{figure}[H]\label{fig:7.06}
        \centering
        \includegraphics[width=.7\textwidth]{sketch_6_06.png}
        \caption{Sketch 7.06}
    \end{figure}
    The integral curves are precisely the curves 
    \[(t\mapsto p+t(1,0))\]
    where \(p\in \R^2\) is the starting point.
\end{example}

\begin{example}
    \(M=\R^2,V=x\partial_y-y\partial_x\equiv (-y,x)\)-
    \begin{figure}[H]\label{fig:7.07}
        \centering
        \includegraphics[width=.7\textwidth]{sketch_7_07.png}
        \caption{Sketch 7.07}
    \end{figure}

    Suppose that \(\gamma:\R\to \R^2\) is an integral curve
    \[t\mapsto (\gamma^1(t),\gamma^2(t))\]
    Then we need \begin{align*}
        \dot{\gamma}(t)&=-\gamma^2(t)\\
        \dot{\gamma}^2(t) = \gamma^1
    \end{align*}
    which is an ODE, with the following unique solution: 
    
    \begin{align*}
        \gamma^1(t)=a\cos t-b sin (t), 
        \gamma^2(t)=a \sin t + b\cos(t).
    \end{align*}
    Hence \[\gamma(t)=(a\cos t-b sin (t),a \sin t + b\cos(t))\text{, }a,b\in \R\]
    integral curve with starting point \((a,b)\).
\end{example}
%todo maybe python code and output?
\begin{proposition}\label{prop:7.9}
    Let \(M\) be a smooth manifold. Let \(V\in \cX(M)\).
    \begin{enumerate}
        \item[(a)] \dhighlight{Existence:} Given any point \(p\in M,\) there exists an open interval \(0\in J\subset \R\) and 
                   an integral curve \(\gamma:J\to M\) starting at \(p\)
        \item[(b)] \dhighlight{Uniqueness:} If \(\sigma,\gamma:J\to M\) starting at the same point \(p=\sigma(0)=\gamma(0)\), then \(\sigma=\gamma\)
    \end{enumerate}
    \begin{figure}[H]\label{fig:7.08}
        \centering
        \includegraphics[width=.7\textwidth]{sketch_7_08.png}
        \caption{Sketch 7.08}
    \end{figure}
\end{proposition}

\begin{remark}\marginnote{This probably needs Zorn's lemma.}
    It follows from the proposition that,\(\forall p\in M\) there is a largest interval \(0\in J\subset\R\) admitting an integral curve \(\gamma:J\to M\).
    We call \(\gamma : J\to M\) the \dhighlight{maximal integral curve}.
\end{remark}

\begin{proof}[Proof of proposition \ref{prop:7.9}]
    (a): This is a local statement, hence we can assume open \(M\subset\R^n\). Then we must solve 
    \[\dot{\gamma}(t)=V_{\gamma(t)},\]
    \(\gamma(t)=(\gamma^1(t),\dots,\gamma^n(t))\).
    \begin{align*}
        \begin{cases}
            \dot{\gamma}^1(t)&=V^1_{\gamma(t)}\\
            \vdots & \vdots \\
            \dot{\gamma}^n(t)&=V^n_{\gamma(t)}
        \end{cases}
    \end{align*}
    This is a system of ordinary differential equations (ODEs). Hence by Theorem D.1 in the appendix of \cite{smooth_manifolds}\footnote{On the course website}, 
    the system admits a unique solution with \(\gamma(0)=p\in M \subset \R^n\). 

    (b): Let \(\mathcal{E}\subset J\) be a subset of points \(t\in J\) such that \(\sigma(t)=\gamma(t)\).\marginnote{We need this, because the uniqueness part of the theorem is local, but our statement in (b) is not}
    Observe that \(0\in\mathcal{E}\) by assumption. Observe also that \(\mathcal{E}\) is closed, since \(\sigma,\gamma\) are continuous functions.
    Moreover \(\mathcal{E}\) is open by the uniqueness part of theorem D1. \(\implies \mathcal{E}=J\).\qedhere

\end{proof}
%TODO: Citation should be in the color of the course

\begin{lemma}\label{lem:7.10}
    If \(F:M\to N,X\in \cX(M),Y\in \cX(N),X,Y\) are \(F\) related, then \(F\) takes 
    integral curves of \(X\) to integral curves of \(Y\).
\end{lemma}

\begin{proof}
    Suppose \(\gamma:J\to M\) integral curve of \(X\). 
    \begin{align*}
        (F\circ \gamma)'(t)=dF_{\gamma(t)}\dot\gamma(t)\stackrel{F\text{-related}}{=}Y_{F\circ \gamma(t)}\hspace{1cm}\qedhere
    \end{align*}
\end{proof}

\begin{remark}
    There is also a converse. (exercise)
\end{remark}

\begin{definition*}
    We say that a vector field \(V\in \cX(M)\) is \dhighlight{complete} if for all 
    \(p\in M\), the maximal integral curve starting at \(p\in M\) is defined on \(\R\).
\end{definition*}

\begin{example}[Example of a non-complete vector field]
    \(M=\R\setminus\{0\},V=\partial_x\). Pick \(p=-1\in \R\). Then the integral curve starting at 
    \(p\) is the map
    \[t\mapsto -1 +t.\]
    This is only defined on \((-\infty,1)\).
\end{example}
\markeol{16}

\beginlecture{17}{06.12.2024}
\begin{example}[Another example of incompleteness]
    \(M=\R,V=x^2\partial_x\)
    \begin{figure}[H]\label{fig:7.09}
        \centering
        \includegraphics[width=.7\textwidth]{sketch_7_09.png}
        \caption{Sketch 7.09}
    \end{figure}
    Setting \(p=1\), let \(x\mapsto \gamma(x)\) the maximal integral curve of \(V\) starting at \(p\).
    \[\implies \begin{cases}
        \gamma(0)&=p\\
        \dot{\gamma}(t)&=V_{\gamma(t)}=\gamma(t)^2(\partial_x)_{t}\stackrel{M=\R}{=}\gamma(t)^2
    \end{cases}\]
    Therefore \(\gamma(t)=\frac{1}{1-t}\), as \(t\to 1\)\marginnote{There is a finite time blow-up at \(1\) of the ODE. We never reach \(t=1\). Incomplete integral curves leave all compact sets!}
\end{example}

\section{Flows}

Fix a smooth manifold \(M\).

\begin{definition*}
    A \dhighlight{flow domain} is an open set \(\mathcal{D}\subset\R\times M\) such that,
    for all \(p\in M\),
    \[\mathcal{D}^{(p)}=\{t\in \R\mid (t,p)\in \mathcal{D}\}\subset\R\]
    is an open interval and \(0\in \mathcal{D}^{(p)}\).
\end{definition*}

\begin{example}[and non-example]
    \begin{figure}[H]\label{fig:7.10}
        \centering
        \includegraphics[width=.7\textwidth]{sketch_7_10.png}
        \caption{Sketch 7.10}
    \end{figure}
\end{example}

\begin{definition*}
    A \dhighlight{flow} \(\Psi:\mathcal{D}\to M\) is a map such that 
    \begin{enumerate}
        \item[(i)] \(\Psi((0,p))=p\)
        \item[(ii)] \(\Psi((t,\Psi(s,p)))=\Psi(s+t,p)\) whenever this makes sense, i.e. \(s,s+t\in\mathcal{D}^{(p)},t\in \mathcal{D}^{(p)}\) \marginnote{One parameter subgroup property}  
    \end{enumerate}
\end{definition*}

\dhighlight{Notation}: Given a flow \(\Psi:\mathcal{D}\to M\), we write:
\begin{itemize}
    \item if \((-\epsilon,\epsilon)\times M\subset \cD, s\in (-\epsilon,\epsilon),\Psi_s=\Psi(s,\cdot):M\to M\). This is a diffeomorphism, since \(\Psi_{-s}\circ \Psi_s=\Psi_0=\text{id}\)
    \item given \(p\in M\): \(\Phi^{(p)}=\Psi(\cdot,p):\underbrace{\cD^{(p)}}_{\subset \R}\to M\), which is a path
\end{itemize}

\begin{lemma}\label{lem:7.11}
    \begin{enumerate}
        \item[(a)] If \(\Psi:\cD\to M\) is a flow, then \(p\mapsto \frac{d}{dt}\restrict{t=0}\underbrace{\Psi(t,p)}_{\Psi^{(p)}(t)}\in T_p M\)  defines a smooth vector field \(V^{\Psi}\) on \(M\)
        \item[(b)] For \(p\in M,\Psi^{(p)}:\cD^{(p)}\to M\) are integral curves of the vector \(V^{\Psi}\). 
    \end{enumerate}
\end{lemma}

\begin{proof}
    \dhighlight{(a):} Enough to show, for all smooth functions \(f:M\to \R, V^\Psi f=(p\mapsto V_p^\Psi f)\) is also smooth (lemma \ref{lem:7.3}).
    But \(V^\Psi f(p)=V_p f=\frac{d}{dt}\restrict{t=0}(f\circ \Psi^{(p)}(t))=\partial_t (f\circ \Psi)(0,p)\), \(p\mapsto \partial_t(f\circ \Psi(0,p))\) is smooth.

    \dhighlight{(b):} We need tho show that \(V_{\Psi^{(p)}(t_0)}=\Psi^{(p)}(t_0),t_0\in\cD^{(p)}\).
    But for \(f\in C^\infty(M),q=\Psi^{(p)}(t_0)=\Psi(t_0,p)\), we have 
    \begin{align*}
        V_q^{\Psi} f&=\Psi^{q}(0)f=\frac{d}{dt}\restrict{t=0}f(\Psi^{(q)}(t))\\
        &=\frac{d}{dt}\restrict{t=0}f(\Psi(t,\underbrace{\Psi(t_0,p)}_{=q}))\\
        &=\frac{d}{dt}\restrict{t=0} f(\Psi(t+t_0,p))=\frac{d}{dt}\restrict{t=0}f(\Psi^{(p)}(t_0+t))\\
        &=\dot{\Psi}^{(p)}(t_0)f\subset T_{\Psi^{(p)}(t_0)}  
    \end{align*}

\end{proof}


\begin{theorem}[Theorem of flows]\label{thm:7.12}\marginnote{The map AND the domain are unqiue}
    Let \(V\in \cX(M)\). Then there exists a unique flow \(\Psi:\cD\to M\) such that 
    \[V^{\Psi}=V\land\Psi^{(p)}:\cD^{(p)}\to M \text{ are maximal integral curves}\]
    \begin{figure}[H]\label{fig:7.11}
        \centering
        \includegraphics[width=.7\textwidth]{sketch_7_11.png}
        \caption{Sketch 7.11}
    \end{figure}
\end{theorem}

\begin{proof}[Sketch]
    To define \(\Psi\) send \((t,p)\mapsto \gamma^{(p)}(t)\), where \(\gamma^{(p)}\) is the (unique) 
    integral curve at \(p\).
\end{proof}

\section{The Lie derivative}

\marginnote{A lot of the proves are sketches, to increase speed}
\dhighlight{Trivia:} (Sophus Lie): Lie groups, Lie algebras, but also: (to) lie. There was a hearing in congress (NSF)
about a grant of Lie groups.

Let \(V=(V^1,\dots,V^n)\) be a vector field on \(\R^n\). \(V^i:\R^n\to \R\). The expression \(\partial_{x_i} V(x)=(\partial_{x_i} V^1,\dots,\partial_{x_i} V^n)\)
the derivative of \(V\in \cX(\R^n)\) in the direction of \(\partial_{x_i}\).

\dhighlight{However:} on a general manifold this does not make sense.
\begin{figure}[H]\label{fig:7.12}
    \centering
    \includegraphics[width=.7\textwidth]{sketch_7_12.png}
    \caption{Sketch 7.12}
\end{figure}

\(\gamma:(-\epsilon,\epsilon)\to M,\gamma(0)=p\). Want to define \(\partial_{\gamma(0)}V\)
\[\lim_{t\to 0}\frac{\overbrace{V_{\gamma(t)}}^{T_{\gamma(t)}M}-\overbrace{V_{\gamma(0)}}^{\in T_{\gamma(0)}M}}{t}\]
Two approaches to defining derivatives  of vector fields
\begin{itemize}
    \item introduce connections (\(\pi:E\to B\)) Choose extra data. A connection \(\implies \nabla_{\gamma(0)}\sigma\) makes sense    
    \item Lie derivatives: Only works on the tangent bundle ( a associated vector bundles)
\end{itemize}

\begin{definition*}
    Let \(V,W\in \cX(M)\). We define at \(p\) \[\lim_{t\to 0}(\cL_VW)_p\coloneqq \frac{d}{dt}\restrict{t=0}
    \left(\frac{d({}^V\Psi_{-t})(W_{{}^V\Psi_t(p)})-W_p}{t}\right)\]
\end{definition*}

Note \(d\left({}^V \Psi_{-t}\right)_{{}^V\Psi_{t}(p)}:T_{{}^V\Psi_{t}(p)}\to T_p\)

\begin{figure}[H]\label{fig:7.13}
    \centering
    \includegraphics[width=.7\textwidth]{sketch_7_13.png}
    \caption{Sketch 7.13}
\end{figure}

\begin{lemma}\label{lem:7.13}
    \(\cL_VW\in \cX(M)\).
\end{lemma}

\begin{proof}
    Let \((U,\varphi)\) be a chart with \(p\in U\). Let \(J_0\subset \R\) be the interval containing \(0\), let \(U_0\subset U\)
    Assume \(J_0,U_0\) are sufficiently small such that \( {}^V \Psi\restrict{J_0\times U_0}\)
    has image in \(U\).

    In \((U,\varphi)\) coordinates (i.e. \(x_i\equiv x_i\circ \varphi\)), we have 
    \begin{align*}
        \Psi(t,x)=(\Psi^1(t,x),\dots,\Psi^{n}(t,x)).
    \end{align*}
    Then \((d\Psi_{-t})_{\Psi(t,x)}=\begin{pmatrix}
        \partial_{x_i}\Psi^{j}(-t,x)
    \end{pmatrix}_{1\leq i,j\leq n}\). Hence 
    \(d\Psi_{-t}W_{\Psi(t,x)}=\begin{pmatrix}
        \partial_{x_i}\Psi^{j}(-t,x)
    \end{pmatrix}_{1\leq i,j\leq n} \underbrace{(W^1(\Psi(t,x)),W^n(\Psi(t,x)))}_{n\times 1}\).
    Hence \[\frac{d}{dt}\restrict{t=0}\left(d\Psi_{-t}W_{\Psi(t,x)} \right)=\lim_{t\to 0}\left(\frac{d\Psi_{-t}W_{\Psi(t,x)}-W_{\Psi(0,x)}}{t}\right)\qedhere\]
\end{proof}

\begin{remark}
    If \(F:M\to N\) diffeomorphism,then 
    \[F_\star(\cL_VW)=\cL_{F_\star V}F_\star W\]
\end{remark}

\begin{proposition}\label{prop:7.14}\marginnote{In lecture 17 this was a lemma, but in lecture 18 this is a proposition}
    \((\cL_VW)=[V,W]\) for \(V,W\in\cX(M)\).
\end{proposition}


\markeol{17}


\begin{proof}\beginlecture{18}{10.12.2024}
    Enough to check that \((\cL_VW)_p=[V,W]_p\)
    We are going to consider three cases:
    \dhighlight{1.} \(V_p\neq 0\):

     According to Sheet 10, we can find a chart \(U,\varphi\), \(p\in U\) with the property 
    that \(\partial_{x_1}=V\) on \(U\), where \((x_i)_{i=1}^n\) are the coordinate functions.
    \begin{figure}[H]\label{fig:7.14}
        \centering
        \includegraphics[width=.7\textwidth]{sketch_7_14.png}
        \caption{Sketch 7.14}
    \end{figure}
    Hence, we can now assume that \(M=U\subset\R^n,V=\partial_{x_1}\). \marginnote{Due to being invariant under diffeomorphisms, we can just pick nice coordinates} % TODO
    \begin{align*}
        \implies& {}^{\partial_{x_1}}\Psi_t(x)=(x_1+t,x_2,\dots,x_n)\\
        \implies& d(\Psi_{-t})_{\Psi_t(x)}(W_{\Psi_t(x)})=d(\Psi_{-t})\left(\overbrace{W^1(x_1+t,x_2,\dots,x_n),\dots,W^n(x_1+t,x_2,\dots,x_n)}^{\in T_{\Psi_t(x)}\equiv \R^n}\right)\\
        &=(\overbrace{W^1(x_1+t,x_2,\dots,x_n),\dots,W^n(x_1+t,x_2,\dots,x_n)}^{\in T_x M=\R^n})\\
        &\implies (\cL_V W)_0 =\frac{d}{dt}\restrict{t=0}\left(d(\Psi_{-t})_{\Psi_t(0)}(W_{\Psi_t(0)})\right)=\frac{d}{dt}\restrict{t=0}\left(W^1(t,0,\dots,0),\dots,W^n(t,0,\dots,0)\right)\\
        &= (\partial_{x_1}W^{1}(0,\dots,0),\dots,\partial_{x_1}W^{n}(0,\dots,0))=[\partial_{x_1}W]_0
    \end{align*}
    
    \dhighlight{2.} \(p\in \overline{\{q\mid V_q\neq 0\}}\). This implies 
    \[(\cL_VW)_p=[V,W]_p\]
    by continuity.

    \dhighlight{3.} \(p\) admits a neighborhood \(\mathcal{O}\subset M\) s.t. \(V\restrict{\mathcal{O}}\equiv 0\). Then 
    \[(\cL_VW)_p=0=[V,W]_p.\]
    This is an exercise.
\end{proof}

\dhighlight{A very important property:} We say that \(V,W\in\cX(M)\) \dhighlight{commute}, if \([V,W]=0\).
This is equivalent by \ref{thm:7.15} to \(^V\Psi,^W \Psi\) commuting.

\begin{figure}[H]\label{fig:7.15}
    \centering
    \includegraphics[width=.7\textwidth]{sketch_7_15.png}
    \caption{Sketch 7.15}
\end{figure}

\begin{theorem}\label{thm:7.15}
    The following are equivalent:
    \begin{enumerate}
        \item[(i)] \([V,W]=\cL_VW=0\) 
        \item[(i')] \([W,V]=\cL_WV=0\)
        \item[(ii)] \(^V\Psi_t(\cdot)_\star W=W\)
        \item[(ii')] \(^W\Psi_t(\cdot)_\star V=V\)
        \item[(iii)] \(^V\Psi_s {}^W\Psi_t=^W\Psi_t {}^V\Psi_s\) for all \(s,t\) where this makes sense.   
    \end{enumerate}
\end{theorem}

\begin{proof}[Proof sketch]
    \((i)\iff (i')\): By definition.

    \((i)\implies (ii)\): Need the identity from Sheet 10 (optional problem). Differentiate the expression \(\Psi_{t\star}W\).

    \((ii)\implies (iii)\): Need to check (essentially a tautology) that if the flow of \(V\) preserves \(W\), then it preserves the flow of \(W\) as well.

    \((iii)\implies (i)\): \(^W\Psi {}^{( {}^V\Psi_t(p))}(s)= {}^V\Psi_t({}^W\Psi^{(p)})(s)\)
    \begin{figure}[H]\label{fig:7.16}
        \centering
        \includegraphics[width=.7\textwidth]{sketch_7_16.png}
        \caption{Sketch 7.16}
    \end{figure}
    \[\frac{d}{ds}\restrict{s=0} {}^W\Psi {}^{( {}^V\Psi_t(p))}(s)=W_{\Psi_t(p)}=d( {}^V\Psi_t)(W_p)\]
    Apply \(d(\Psi_{-t})(\cdot)\) to both sides of the equality, to get 
    \[d ^V\Psi_{-t}\left(W_{\Psi_t(p)}\right)=W_p.\]
    Finally, apply \(\frac{d}{dt}\restrict{t=0}\) to get \((\cL_VW=0)\).
\end{proof}


\begin{theorem}\label{thm:7.16}\marginnote{This is a very good theorem to remember! Might very well be relevant to an exam problem}
    Let \(M\) be a smooth manifold. Let \((V^1,\dots,V^m)\in \cX(M)^m\) be a local frame at \(p\).
    Then, the following are equivalent:
    \begin{enumerate}
        \item[(i)] there exists a chart \((U,\psi),p\in U\) s.t. \(V^i=\partial_{x_i}\), where \((x_i)\) are the coordinate functions
        \item[(ii)] \([V^i,V^j]=0\) near \(p\) for all \(i,j\).  
    \end{enumerate}
\end{theorem}

\begin{proof}[Proof idea]
    \((i)\implies (ii)\) is obvious.

    \((ii)\implies (i)\). Define a chart \begin{align*}
        (-\epsilon,\epsilon)^m&\to M\\
        (t_1,\dots,t_n)&\mapsto\underbrace{\left(\left({}^{V^1}\Psi^{(p)}(t_1),\dots,{}^{V^m}\Psi^{(p)}(t_m)\right)=\right)}_{\text{bad notation}}{}^{V^1}\Psi_{t_1}\left(\dots {}^{V^m}\Psi_{t_m}(p)\right) 
    \end{align*}
\end{proof}

\begin{remark}
    Lecture 20 will start 5 minutes earlier!
\end{remark}

