Sard's theorem and applications